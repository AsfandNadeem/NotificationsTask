{"version":3,"sources":["../../../projects/notify/src/lib/notify-container/notify-container.component.ts","../../../projects/notify/src/lib/notify-container/notify-container.component.html","../../../projects/notify/src/lib/notify.component.html","../../../projects/notify/src/lib/notify.component.ts","../../../projects/notify/src/lib/elementAttachment.service.ts","../../../projects/notify/src/lib/notify.service.ts","../../../projects/notify/src/lib/notify.module.ts"],"names":["NotifyContainerComponent","prototype","ngOnInit","selectors","ngContentSelectors","decls","vars","template","rf","ctx","i0.ɵɵprojection","Component","selector","templateUrl","styleUrls","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵstyleProp","NotifyComponent","NotifyService","renderer","this","type","progressrequired","progressTime","actualTime","destroy","EventEmitter","setWidth","ngAfterViewInit","_this","mySubscription","interval","subscribe","x","getProgress","getBackground","onClose","emit","unsubscribe","i0","ɵɵdirectiveInject","Renderer2","viewQuery","i0.ɵɵtext","i0.ɵɵlistener","i0.ɵɵtemplate","i0.ɵɵtextInterpolate","i0.ɵɵproperty","header","Input","message","Output","divCurtain","ViewChild","ElementAttachmentService","componentFactoryResolver","appRef","injector","createComponentinDom","component","componentRef","resolveComponentFactory","create","attachView","hostView","getElement","rootNodes","addChildtoElement","child","parent","document","body","appendChild","destroyElement","detachView","ɵɵinject","ComponentFactoryResolver","ApplicationRef","Injector","factory","ɵfac","providedIn","Injectable","elementService","maxLimit","countNotifications","Queue","Array","exists","_children","NotifyContainerRef","NotifyContainerElement","appendComponentToContainer","childComponentRef","childElement","instance","sub","push","setTimeout","open","category","splice","indexOf","length","shift","destroyAll","forEach","cmp","NotifyModule","CommonModule","declarations","imports","exports","NgModule"],"mappings":"sfAOAA,EAAA,WAEE,SAAAA,YAGAA,EAAAC,UAAAC,SAAA,eALF,oCAAaF,qCAAAA,EAAwBG,UAAA,CAAA,CAAA,yBAAAC,yBAAAC,MAAA,EAAAC,KAAA,EAAAC,SAAA,SAAAC,EAAAC,6BCPrCC,EAAAA,aAAAA,mFDOaV,EAAwB,CAAA,MALpCW,EAAAA,gBAAU,CACTC,SAAU,uBACVC,YAAa,oCACbC,UAAW,CAAC,oHEWVC,EAAAA,eAAAA,EAAAA,MAAAA,GACIC,EAAAA,UAAAA,EAAAA,MAAAA,GAAAA,IAGJC,EAAAA,6CAHsBC,EAAAA,UAAAA,GAAAC,EAAAA,YAAAA,QAAAA,EAAAA,SAAAA,uBCUxB,SAAAC,EAAoBC,EAAqCC,GAArCC,KAAAF,cAAAA,EAAqCE,KAAAD,SAAAA,EAVhDC,KAAAC,KAAO,GACPD,KAAAE,kBAAmB,EACnBF,KAAAG,aAAe,EACfH,KAAAI,WAAa,EACZJ,KAAAK,QAA6B,IAAIC,EAAAA,aAG3CN,KAAAO,SAAW,SAOXV,EAAAnB,UAAAC,SAAA,aAGAkB,EAAAnB,UAAA8B,gBAAA,WAAA,IAAAC,EAAAT,KACMA,KAAKE,mBACPF,KAAKO,SAAaP,KAAKI,WAAaJ,KAAKG,aAAgB,IACzDH,KAAKU,eAAiBC,EAAAA,SAAS,KAAKC,WAAS,SAAEC,GAC7CJ,EAAKK,mBAMXjB,EAAAnB,UAAAqC,cAAA,WACE,MAAkB,YAAdf,KAAKC,KACA,aAEa,SAAbD,KAAKC,KACL,MAGA,QAIXJ,EAAAnB,UAAAsC,QAAA,WACEhB,KAAKK,QAAQY,QAGfpB,EAAAnB,UAAAoC,YAAA,WACMd,KAAKI,WAAa,GACpBJ,KAAKI,WAAaJ,KAAKI,WAAa,IACpCJ,KAAKO,SAAaP,KAAKI,WAAaJ,KAAKG,aAAgB,KAKzDH,KAAKU,eAAeQ,qDAtDbrB,GAAesB,EAAAC,kBAAAtB,GAAAqB,EAAAC,kBAAAD,EAAAE,8CAAfxB,EAAejB,UAAA,CAAA,CAAA,eAAA0C,UAAA,SAAArC,EAAAC,+rBDd5BM,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,MAAI+B,EAAAA,OAAAA,GAAU7B,EAAAA,eAClBA,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,IAAAA,GAAiBgC,EAAAA,WAAAA,SAAAA,WAAAA,OAAStC,EAAA8B,aAAWO,EAAAA,OAAAA,EAAAA,MACrC7B,EAAAA,eACJA,EAAAA,eACJA,EAAAA,eACJA,EAAAA,eAEAF,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,GAAAA,IAAAA,GAAqB+B,EAAAA,OAAAA,IAAW7B,EAAAA,eACpCA,EAAAA,eACA+B,EAAAA,WAAAA,GAAAA,EAAAA,EAAAA,EAAAA,MAAAA,GAKJ/B,EAAAA,sBApB6CC,EAAAA,UAAAA,GAAAC,EAAAA,YAAAA,mBAAAA,EAAAA,iBAGzBD,EAAAA,UAAAA,GAAA+B,EAAAA,kBAAAA,EAAAA,QAUS/B,EAAAA,UAAAA,GAAA+B,EAAAA,kBAAAA,EAAAA,SAEnB/B,EAAAA,UAAAA,GAAAgC,EAAAA,WAAAA,OAAAA,EAAAA,iZCFG9B,EAAe,CAAA,MAN3BT,EAAAA,gBAAU,CACTC,SAAU,aACVC,YAAa,0BACbC,UAAW,CAAC,iFAIHqC,OAAM,CAAA,MAAdC,EAAAA,QACQC,QAAO,CAAA,MAAfD,EAAAA,QACQ5B,KAAI,CAAA,MAAZ4B,EAAAA,QACQ3B,iBAAgB,CAAA,MAAxB2B,EAAAA,QACQ1B,aAAY,CAAA,MAApB0B,EAAAA,QACQzB,WAAU,CAAA,MAAlByB,EAAAA,QACSxB,QAAO,CAAA,MAAhB0B,EAAAA,SAEyBC,WAAU,CAAA,MAAnCC,EAAAA,gBAAU,mBCdb,IAAAC,EAAA,WAEI,SAAAA,EACYC,EACAC,EACAC,GAFArC,KAAAmC,yBAAAA,EACAnC,KAAAoC,OAAAA,EACApC,KAAAqC,SAAAA,SAIZH,EAAAxD,UAAA4D,qBAAA,SAAqBC,GACjB,IAAMC,EAAexC,KAAKmC,yBACrBM,wBAAwBF,GACxBG,OAAO1C,KAAKqC,UAIjB,OADArC,KAAKoC,OAAOO,WAAWH,EAAaI,UAC7BJ,GAIXN,EAAAxD,UAAAmE,WAAA,SAAWL,GACP,OAAQA,EAAaI,SAChBE,UAAU,IAInBZ,EAAAxD,UAAAqE,kBAAA,SAAkBC,EAAoBC,QAAA,IAAAA,IAAAA,EAAsBC,SAASC,MACjEF,EAAOG,YAAYJ,IAIvBd,EAAAxD,UAAA2E,eAAA,SAAeb,GACXxC,KAAKoC,OAAOkB,WAAWd,EAAaI,UACpCJ,EAAanC,aAjCrB,oCAAa6B,GAAwBf,EAAAoC,SAAApC,EAAAqC,0BAAArC,EAAAoC,SAAApC,EAAAsC,gBAAAtC,EAAAoC,SAAApC,EAAAuC,gDAAxBxB,EAAwByB,QAAxBzB,EAAwB0B,KAAAC,WAFrB,yEAEH3B,EAAwB,CAAA,MAHpC4B,EAAAA,iBAAW,CACRD,WAAY,oICYd,SAAA/D,EAAoBiE,EACV3B,GADUpC,KAAA+D,eAAAA,EACV/D,KAAAoC,OAAAA,EATVpC,KAAAgE,SAAW,EACXhE,KAAAiE,mBAAqB,EACrBjE,KAAAkE,MAAQC,QACRnE,KAAAoE,QAAS,EACDpE,KAAAqE,UAA6C,GAOnDrE,KAAKsE,mBAAqBtE,KAAK+D,eAAezB,qBAAqB7D,GACnEuB,KAAKuE,uBAAyBvE,KAAK+D,eAAelB,WAAW7C,KAAKsE,oBAClEtE,KAAK+D,eAAehB,kBAAkB/C,KAAKuE,+BAIrCzE,EAAApB,UAAA8F,2BAAA,SAA2B5C,EAAgBE,EAAiB7B,GAA5D,IAAAQ,EAAAT,KAEAyE,EAAoBzE,KAAK+D,eAAezB,qBAAqBzC,GAE7D6E,EAAe1E,KAAK+D,eAAelB,WAAW4B,GAEpDA,EAAkBE,SAAS/C,OAASA,EAEpC6C,EAAkBE,SAAS7C,QAAUA,EAErC2C,EAAkBE,SAAS1E,KAAOA,EAIlC,IAAM2E,EAAMH,EAAkBE,SAAStE,QAAQO,WAAU,WACvDgE,EAAI1D,cACJT,EAAKJ,QAAQoE,MAGfzE,KAAK+D,eAAehB,kBAAkB2B,EAAc1E,KAAKuE,wBACzDvE,KAAKqE,UAAUQ,KAAKJ,GACpBzE,KAAKiE,qBAEO,QAARhE,IACFD,KAAKoE,QAAS,EACdK,EAAkBE,SAASzE,kBAAmB,EAC9CuE,EAAkBE,SAASxE,aAAe,IAC1CsE,EAAkBE,SAASvE,WAAa,IACxC0E,YAAW,WACLrE,EAAK2D,QACP3D,EAAKJ,QAAQoE,KAEd,SAIP3E,EAAApB,UAAAqG,KAAA,SAAKnD,EAAQE,EAASkD,GAChBhF,KAAKiE,mBAAqBjE,KAAKgE,SACjChE,KAAKwE,2BAA2B5C,EAAQE,EAASkD,GAGjDhF,KAAKkE,MAAMW,KAAK,CAAEjD,OAAQA,EAAQE,QAASA,EAAS7B,KAAM+E,KAI9DlF,EAAApB,UAAA2B,QAAA,SAAQoE,GACNzE,KAAK+D,eAAeV,eAAeoB,GAClCzE,KAAc,UAAEiF,OAAQjF,KAAc,UAAEkF,QAAQT,GAAoB,GACjEzE,KAAKoE,SACPpE,KAAKoE,QAAS,GAEZpE,KAAKiE,mBAAqB,IAC5BjE,KAAKiE,qBACDjE,KAAKkE,MAAMiB,QAAU,IACvBnF,KAAKwE,2BAA2BxE,KAAKkE,MAAM,GAAGtC,OAAQ5B,KAAKkE,MAAM,GAAGpC,QAAS9B,KAAKkE,MAAM,GAAGjE,MAC3FD,KAAKkE,MAAMkB,WAMjBtF,EAAApB,UAAA2G,WAAA,WACErF,KAAKqE,UAAUiB,SAAQ,SAAAC,GAAO,OAAAA,EAAIlF,aAClCL,KAAKqE,UAAUY,OAAO,EAAGjF,KAAKqE,UAAUc,QACxCnF,KAAKiE,mBAAqB,yCAlFjBnE,GAAaqB,EAAAoC,SAAArB,GAAAf,EAAAoC,SAAApC,EAAAsC,sDAAb3D,EAAa6D,QAAb7D,EAAa8D,KAAAC,WAFZ,yEAED/D,EAAa,CAAA,MAHzBgE,EAAAA,iBAAW,CACVD,WAAY,8ECKd,8CAAa2B,oCAAAA,wCAJF,CAACC,EAAAA,kFAICD,EAAY,CAAAE,aAAA,CALR7F,EAAiBpB,GAAwBkH,QAAA,CAC9CF,EAAAA,cAAYG,QAAA,CAEZ/F,qEAEC2F,EAAY,CAAA,MANxBK,EAAAA,eAAS,CACRH,aAAc,CAAC7F,EAAiBpB,GAChCkH,QAAS,CAACF,EAAAA,cAEVG,QAAS,CAAC/F","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-notify-container',\n  templateUrl: './notify-container.component.html',\n  styleUrls: ['./notify-container.component.css']\n})\nexport class NotifyContainerComponent implements OnInit {\n\n  constructor() { }\n  \n\n  ngOnInit(): void {\n  }\n\n}\n","<ng-content></ng-content>","<div class=\"card container  my-4 stack-top\">\n    <div class=\"card-header container-fluid\" [style.backgroundColor]=\"getBackground()\">\n        <div class=\"row\">\n            <div class=\"col-10\">\n                <h3>{{header}}</h3>\n            </div>\n            <div class=\"col-2\">\n                <a type=\"button\" (click)=\"onClose()\">X\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"card-body\" style=\"text-align: center;\">\n        <p class=\"card-text\">{{message}}</p>\n    </div>\n    <div *ngIf=\"progressrequired\" class=\"progress\">\n        <div #progressDiv [style.width.%]=\"setWidth\" class=\"progress-bar progress-bar-striped active\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n\n        </div>\n    </div>\n</div>","import { AfterViewInit, ElementRef, HostBinding, Input, ViewChild } from '@angular/core';\nimport { Renderer2 } from '@angular/core';\nimport { EventEmitter } from '@angular/core';\nimport { Output } from '@angular/core';\nimport { Component, OnInit } from '@angular/core';\nimport { interval, Subscription } from 'rxjs';\nimport 'rxjs/add/observable/interval';\nimport { NotifyService } from './notify.service';\n@Component({\n  selector: 'lib-notify',\n  templateUrl: './notify.component.html',\n  styleUrls: ['./notify.component.css'\n  ]\n})\nexport class NotifyComponent implements OnInit, AfterViewInit {\n  @Input() header: string;\n  @Input() message: string;\n  @Input() type = '';\n  @Input() progressrequired = false;\n  @Input() progressTime = 0;\n  @Input() actualTime = 0;\n  @Output() destroy: EventEmitter<any> = new EventEmitter();\n  mySubscription: Subscription;\n  @ViewChild('progressDiv') divCurtain: ElementRef;\n  setWidth = 0;\n\n  // @HostBinding('class.redbackground') warning: boolean;\n  constructor(private NotifyService: NotifyService, public renderer: Renderer2) {\n\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit() {\n    if (this.progressrequired) {\n      this.setWidth = ((this.actualTime / this.progressTime) * 100);\n      this.mySubscription = interval(100).subscribe((x => {\n        this.getProgress();\n      }));\n    }\n\n  }\n\n  getBackground(): string {\n    if (this.type === 'warning') {\n      return 'darkorange';\n    }\n    else if (this.type == 'error') {\n      return 'red'\n    }\n    else {\n      return 'blue';\n    }\n  }\n\n  onClose(): void {\n    this.destroy.emit();\n  }\n\n  getProgress() {\n    if (this.actualTime > 0) {\n      this.actualTime = this.actualTime - 100;\n      this.setWidth = ((this.actualTime / this.progressTime) * 100);\n      \n      // this.divCurtain.nativeElement.style.width = (this.actualTime / this.progressTime).toString() + '%';\n    }\n    else {\n      this.mySubscription.unsubscribe();\n    }\n  }\n}\n","import { EmbeddedViewRef } from '@angular/core';\nimport { ApplicationRef } from '@angular/core';\nimport { Injector } from '@angular/core';\nimport { ComponentRef } from '@angular/core';\nimport { ComponentFactoryResolver, Injectable } from '@angular/core'\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ElementAttachmentService {\n\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private injector: Injector) {\n\n    }\n    // 1. Create a Cotntainer component reference from the component \n    createComponentinDom(component: any): ComponentRef<any> {\n        const componentRef = this.componentFactoryResolver\n            .resolveComponentFactory(component)\n            .create(this.injector);\n\n        // 2. Attach component to the appRef so that it's inside the ng component tree\n        this.appRef.attachView(componentRef.hostView);\n        return componentRef;\n    }\n\n    // 3. Get DOM element from component\n    getElement(componentRef: ComponentRef<any>): HTMLElement {\n        return (componentRef.hostView as EmbeddedViewRef<any>)\n            .rootNodes[0] as HTMLElement;\n    }\n\n    // 4. Append DOM element to the body\n    addChildtoElement(child: HTMLElement, parent: HTMLElement = document.body) {\n        parent.appendChild(child);\n    }\n\n    //5 Destroy Element\n    destroyElement(componentRef: ComponentRef<any>) {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n    }\n\n}","import { ComponentRef } from '@angular/core';\nimport { ApplicationRef, ComponentFactoryResolver, EmbeddedViewRef, Injectable, Injector } from '@angular/core';\nimport { ElementAttachmentService } from './elementAttachment.service';\nimport { INotification } from './notification.interface';\nimport { NotifyContainerComponent } from './notify-container/notify-container.component';\nimport { NotifyComponent } from './notify.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotifyService {\n  maxLimit = 5;\n  countNotifications = 0;\n  Queue = Array<INotification>();\n  exists = true;\n  private _children: ComponentRef<NotifyComponent>[] = [];\n  private NotifyContainerElement: HTMLElement;\n  private NotifyContainerRef: ComponentRef<NotifyContainerComponent>;\n\n  constructor(private elementService: ElementAttachmentService,\n    private appRef: ApplicationRef) {\n\n    this.NotifyContainerRef = this.elementService.createComponentinDom(NotifyContainerComponent);\n    this.NotifyContainerElement = this.elementService.getElement(this.NotifyContainerRef);\n    this.elementService.addChildtoElement(this.NotifyContainerElement);\n  }\n\n\n  private appendComponentToContainer(header: string, message: string, type: string) {\n    //Create Child Component\n    const childComponentRef = this.elementService.createComponentinDom(NotifyComponent);\n    //Get child Component\n    const childElement = this.elementService.getElement(childComponentRef);\n\n    childComponentRef.instance.header = header;\n\n    childComponentRef.instance.message = message;\n\n    childComponentRef.instance.type = type;\n\n\n\n    const sub = childComponentRef.instance.destroy.subscribe(() => {\n      sub.unsubscribe();\n      this.destroy(childComponentRef);\n    });\n    //Add child component to parent\n    this.elementService.addChildtoElement(childElement, this.NotifyContainerElement);\n    this._children.push(childComponentRef);\n    this.countNotifications++;\n\n    if (type == \"info\") {\n      this.exists = true;\n      childComponentRef.instance.progressrequired = true;\n      childComponentRef.instance.progressTime = 10000;\n      childComponentRef.instance.actualTime = 10000;      \n      setTimeout(() => {\n        if (this.exists) {\n          this.destroy(childComponentRef);\n        }\n      }, 10500);\n    }\n  }\n\n  open(header, message, category) {\n    if (this.countNotifications < this.maxLimit) {\n      this.appendComponentToContainer(header, message, category);\n    }\n    else {\n      this.Queue.push({ header: header, message: message, type: category });\n    }\n  }\n\n  destroy(childComponentRef: ComponentRef<any>) {\n    this.elementService.destroyElement(childComponentRef);\n    (this._children).splice((this._children).indexOf(childComponentRef), 1);\n    if (this.exists) {\n      this.exists = false;\n    }\n    if (this.countNotifications > 0) {\n      this.countNotifications--;\n      if (this.Queue.length >= 1) {\n        this.appendComponentToContainer(this.Queue[0].header, this.Queue[0].message, this.Queue[0].type);\n        this.Queue.shift();\n      }\n    }\n  }\n\n\n  destroyAll() {\n    this._children.forEach(cmp => cmp.destroy());\n    this._children.splice(0, this._children.length);\n    this.countNotifications = 0;\n  }\n\n\n\n\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NotifyComponent } from './notify.component';\nimport { NotifyContainerComponent } from './notify-container/notify-container.component';\n\n\n\n@NgModule({\n  declarations: [NotifyComponent, NotifyContainerComponent],\n  imports: [CommonModule\n  ],\n  exports: [NotifyComponent]\n})\nexport class NotifyModule { }\n"]}