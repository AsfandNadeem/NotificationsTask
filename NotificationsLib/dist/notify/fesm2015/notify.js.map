{"version":3,"file":"notify.js","sources":["../../../projects/notify/src/lib/notify-container/notify-container.component.ts","../../../projects/notify/src/lib/notify-container/notify-container.component.html","../../../projects/notify/src/lib/notify.component.html","../../../projects/notify/src/lib/notify.component.ts","../../../projects/notify/src/lib/elementAttachment.service.ts","../../../projects/notify/src/lib/notify.service.ts","../../../projects/notify/src/lib/notify.module.ts","../../../projects/notify/src/public-api.ts","../../../projects/notify/src/notify.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-notify-container',\n  templateUrl: './notify-container.component.html',\n  styleUrls: ['./notify-container.component.css']\n})\nexport class NotifyContainerComponent implements OnInit {\n\n  constructor() { }\n  \n\n  ngOnInit(): void {\n  }\n\n}\n","<ng-content></ng-content>","<div class=\"card container  my-4 stack-top\">\n    <div class=\"card-header container-fluid\" [style.backgroundColor]=\"getBackground()\">\n        <div class=\"row\">\n            <div class=\"col-10\">\n                <h3>{{header}}</h3>\n            </div>\n            <div class=\"col-2\">\n                <a type=\"button\" (click)=\"onClose()\">X\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"card-body\" style=\"text-align: center;\">\n        <p class=\"card-text\">{{message}}</p>\n    </div>\n    <div *ngIf=\"progressrequired\" class=\"progress\">\n        <div #progressDiv [style.width.%]=\"setWidth\" class=\"progress-bar progress-bar-striped active\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n\n        </div>\n    </div>\n</div>","import { AfterViewInit, ElementRef, HostBinding, Input, ViewChild } from '@angular/core';\nimport { Renderer2 } from '@angular/core';\nimport { EventEmitter } from '@angular/core';\nimport { Output } from '@angular/core';\nimport { Component, OnInit } from '@angular/core';\nimport { interval, Subscription } from 'rxjs';\nimport 'rxjs/add/observable/interval';\nimport { NotifyService } from './notify.service';\n@Component({\n  selector: 'lib-notify',\n  templateUrl: './notify.component.html',\n  styleUrls: ['./notify.component.css'\n  ]\n})\nexport class NotifyComponent implements OnInit, AfterViewInit {\n  @Input() header: string;\n  @Input() message: string;\n  @Input() type = '';\n  @Input() progressrequired = false;\n  @Input() progressTime = 0;\n  @Input() actualTime = 0;\n  @Output() destroy: EventEmitter<any> = new EventEmitter();\n  mySubscription: Subscription;\n  // @ViewChild('progressDiv') divCurtain: ElementRef;\n  setWidth = 0;\n  exists = true;\n\n  // @HostBinding('class.redbackground') warning: boolean;\n  constructor(private NotifyService: NotifyService, public renderer: Renderer2) {\n\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      if (this.type == \"info\" && this.exists) {\n        this.destroy.emit();\n      }\n    }, 10500);\n  }\n\n  ngAfterViewInit() {\n    if (this.progressrequired) {\n      this.setWidth = ((this.actualTime / this.progressTime) * 100);\n      this.mySubscription = interval(100).subscribe((x => {\n        this.setProgress();\n      }));\n    }\n\n  }\n\n  getBackground(): string {\n    if (this.type === 'warning') {\n      return 'darkorange';\n    }\n    else if (this.type == 'error') {\n      return 'red'\n    }\n    else {\n      return 'blue';\n    }\n  }\n\n  onClose(): void {\n    if (this.progressrequired) {\n    this.mySubscription.unsubscribe();\n    }\n    this.destroy.emit();\n  }\n\n  setProgress() {\n    if (this.actualTime > 0) {\n      this.actualTime = this.actualTime - 100;\n      this.setWidth = ((this.actualTime / this.progressTime) * 100);\n      \n      // this.divCurtain.nativeElement.style.width = (this.actualTime / this.progressTime).toString() + '%';\n    }\n    else {\n      this.mySubscription.unsubscribe();\n    }\n  }\n}\n","import { EmbeddedViewRef } from '@angular/core';\nimport { ApplicationRef } from '@angular/core';\nimport { Injector } from '@angular/core';\nimport { ComponentRef } from '@angular/core';\nimport { ComponentFactoryResolver, Injectable } from '@angular/core'\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ElementAttachmentService {\n\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private injector: Injector) {\n\n    }\n    // 1. Create a Cotntainer component reference from the component \n    createComponentinDom(component: any): ComponentRef<any> {\n        const componentRef = this.componentFactoryResolver\n            .resolveComponentFactory(component)\n            .create(this.injector);\n\n        // 2. Attach component to the appRef so that it's inside the ng component tree\n        this.appRef.attachView(componentRef.hostView);\n        return componentRef;\n    }\n\n    // 3. Get DOM element from component\n    getElement(componentRef: ComponentRef<any>): HTMLElement {\n        return (componentRef.hostView as EmbeddedViewRef<any>)\n            .rootNodes[0] as HTMLElement;\n    }\n\n    // 4. Append DOM element to the body\n    addChildtoElement(child: HTMLElement, parent: HTMLElement = document.body) {\n        parent.appendChild(child);\n    }\n\n    //5 Destroy Element\n    destroyElement(componentRef: ComponentRef<any>) {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n    }\n\n}","import { ComponentRef } from '@angular/core';\nimport { ApplicationRef, ComponentFactoryResolver, EmbeddedViewRef, Injectable, Injector } from '@angular/core';\nimport { ElementAttachmentService } from './elementAttachment.service';\nimport { INotification } from './notification.interface';\nimport { NotifyContainerComponent } from './notify-container/notify-container.component';\nimport { NotifyComponent } from './notify.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotifyService {\n  maxLimit = 5;\n  countNotifications = 0;\n  Queue = Array<INotification>();\n  private _children: ComponentRef<NotifyComponent>[] = [];\n  private NotifyContainerElement: HTMLElement;\n  private NotifyContainerRef: ComponentRef<NotifyContainerComponent>;\n\n  constructor(private elementService: ElementAttachmentService,\n    private appRef: ApplicationRef) {\n\n    this.NotifyContainerRef = this.elementService.createComponentinDom(NotifyContainerComponent);\n    this.NotifyContainerElement = this.elementService.getElement(this.NotifyContainerRef);\n    this.elementService.addChildtoElement(this.NotifyContainerElement);\n  }\n\n\n  private appendComponentToContainer(header: string, message: string, type: string) {\n    //Create Child Component\n    const childComponentRef = this.elementService.createComponentinDom(NotifyComponent);\n    //Get child Component\n    const childElement = this.elementService.getElement(childComponentRef);\n\n    childComponentRef.instance.header = header;\n\n    childComponentRef.instance.message = message;\n\n    childComponentRef.instance.type = type;\n\n    childComponentRef.instance.exists = true;\n\n\n\n    const sub = childComponentRef.instance.destroy.subscribe(() => {\n      sub.unsubscribe();\n      this.destroy(childComponentRef);\n    });\n    //Add child component to parent\n    this.elementService.addChildtoElement(childElement, this.NotifyContainerElement);\n    this._children.push(childComponentRef);\n    this.countNotifications++;\n\n    if (type == \"info\") {\n      childComponentRef.instance.exists = true;\n      childComponentRef.instance.progressrequired = true;\n      childComponentRef.instance.progressTime = 10000;\n      childComponentRef.instance.actualTime = 10000;    \n      // setTimeout(() => {\n      //   if (childComponentRef.instance.exists) {\n      //     this.destroy(childComponentRef);\n      //   }\n      // }, 10500);\n    }\n  }\n\n  open(header, message, category) {\n    if (this.countNotifications < this.maxLimit) {\n      this.appendComponentToContainer(header, message, category);\n    }\n    else {\n      this.Queue.push({ header: header, message: message, type: category });\n    }\n  }\n\n  destroy(childComponentRef: ComponentRef<any>) {\n    this.elementService.destroyElement(childComponentRef);\n    (this._children).splice((this._children).indexOf(childComponentRef), 1);\n    if (childComponentRef.instance.exists) {\n      childComponentRef.instance.exists = false;\n    }\n    if (this.countNotifications > 0) {\n      this.countNotifications--;\n      if (this.Queue.length >= 1) {\n        this.appendComponentToContainer(this.Queue[0].header, this.Queue[0].message, this.Queue[0].type);\n        this.Queue.shift();\n      }\n    }\n  }\n\n\n  destroyAll() {\n    this._children.forEach(cmp => this.destroy(cmp));\n    this._children.splice(0, this._children.length);\n    this.countNotifications = 0;\n    \n  }\n\n\n\n\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NotifyComponent } from './notify.component';\nimport { NotifyContainerComponent } from './notify-container/notify-container.component';\n\n\n\n@NgModule({\n  declarations: [NotifyComponent, NotifyContainerComponent],\n  imports: [CommonModule\n  ],\n  exports: [NotifyComponent]\n})\nexport class NotifyModule { }\n","/*\n * Public API Surface of notify\n */\n\nexport * from './lib/notify.service';\nexport * from './lib/notify.component';\nexport * from './lib/notify.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵprojection","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵstyleProp","i0.ɵɵtext","i0.ɵɵlistener","i0.ɵɵtemplate","i0.ɵɵtextInterpolate","i0.ɵɵproperty"],"mappings":";;;;;;MAOa,wBAAwB;IAEnC,iBAAiB;IAGjB,QAAQ;KACP;;gGANU,wBAAwB;0DAAxB,wBAAwB;;QCPrCA,eAAyB;;oFDOZ,wBAAwB;cALpC,SAAS;eAAC;gBACT,QAAQ,EAAE,sBAAsB;gBAChC,WAAW,EAAE,mCAAmC;gBAChD,SAAS,EAAE,CAAC,kCAAkC,CAAC;aAChD;;;;IEUGC,2BAA+C;IAC3CC,2BAEM;IACVC,cAAM;;;IAHgBC,YAA0B;IAA1BC,0CAA0B;;MCHvC,eAAe;;IAc1B,YAAoB,aAA4B,EAAS,QAAmB;QAAxD,kBAAa,GAAb,aAAa,CAAe;QAAS,aAAQ,GAAR,QAAQ,CAAW;QAXnE,SAAI,GAAG,EAAE,CAAC;QACV,qBAAgB,GAAG,KAAK,CAAC;QACzB,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAG,CAAC,CAAC;QACd,YAAO,GAAsB,IAAI,YAAY,EAAE,CAAC;;QAG1D,aAAQ,GAAG,CAAC,CAAC;QACb,WAAM,GAAG,IAAI,CAAC;KAKb;IAED,QAAQ;QACN,UAAU,CAAC;YACT,IAAI,IAAI,CAAC,IAAI,IAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;gBACtC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACrB;SACF,EAAE,KAAK,CAAC,CAAC;KACX;IAED,eAAe;QACb,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,IAAI,GAAG,CAAC,CAAC;YAC9D,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC;gBAC9C,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB,EAAE,CAAC;SACL;KAEF;IAED,aAAa;QACX,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YAC3B,OAAO,YAAY,CAAC;SACrB;aACI,IAAI,IAAI,CAAC,IAAI,IAAI,OAAO,EAAE;YAC7B,OAAO,KAAK,CAAA;SACb;aACI;YACH,OAAO,MAAM,CAAC;SACf;KACF;IAED,OAAO;QACL,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC3B,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;SACjC;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;KACrB;IAED,WAAW;QACT,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;YACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;YACxC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,IAAI,GAAG,CAAC,CAAC;;SAG/D;aACI;YACH,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;SACnC;KACF;;8EAjEU,eAAe;iDAAf,eAAe;QDd5BJ,2BAA4C;QACxCA,2BAAmF;QAC/EA,2BAAiB;QACbA,2BAAoB;QAChBA,uBAAI;QAAAK,SAAU;QAAAH,cAAK;QACvBA,cAAM;QACNF,2BAAmB;QACfA,yBAAqC;QAApBM,oFAAS,aAAS,IAAC;QAACD,eACrC;QAAAH,cAAI;QACRA,cAAM;QACVA,cAAM;QACVA,cAAM;QAENF,2BAAmD;QAC/CA,0BAAqB;QAAAK,UAAW;QAAAH,cAAI;QACxCA,cAAM;QACNK,+DAIM;QACVL,cAAM;;QApBuCC,YAAyC;QAAzCC,oDAAyC;QAGlED,YAAU;QAAVK,6BAAU;QAUDL,YAAW;QAAXK,8BAAW;QAE9BL,YAAsB;QAAtBM,wCAAsB;;oFCFnB,eAAe;cAN3B,SAAS;eAAC;gBACT,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,yBAAyB;gBACtC,SAAS,EAAE,CAAC,wBAAwB;iBACnC;aACF;kFAEU,MAAM;kBAAd,KAAK;YACG,OAAO;kBAAf,KAAK;YACG,IAAI;kBAAZ,KAAK;YACG,gBAAgB;kBAAxB,KAAK;YACG,YAAY;kBAApB,KAAK;YACG,UAAU;kBAAlB,KAAK;YACI,OAAO;kBAAhB,MAAM;;;MCZI,wBAAwB;IAEjC,YACY,wBAAkD,EAClD,MAAsB,EACtB,QAAkB;QAFlB,6BAAwB,GAAxB,wBAAwB,CAA0B;QAClD,WAAM,GAAN,MAAM,CAAgB;QACtB,aAAQ,GAAR,QAAQ,CAAU;KAE7B;;IAED,oBAAoB,CAAC,SAAc;QAC/B,MAAM,YAAY,GAAG,IAAI,CAAC,wBAAwB;aAC7C,uBAAuB,CAAC,SAAS,CAAC;aAClC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;QAG3B,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QAC9C,OAAO,YAAY,CAAC;KACvB;;IAGD,UAAU,CAAC,YAA+B;QACtC,OAAQ,YAAY,CAAC,QAAiC;aACjD,SAAS,CAAC,CAAC,CAAgB,CAAC;KACpC;;IAGD,iBAAiB,CAAC,KAAkB,EAAE,SAAsB,QAAQ,CAAC,IAAI;QACrE,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC7B;;IAGD,cAAc,CAAC,YAA+B;QAC1C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QAC9C,YAAY,CAAC,OAAO,EAAE,CAAC;KAC1B;;gGAlCQ,wBAAwB;6DAAxB,wBAAwB,WAAxB,wBAAwB,mBAFrB,MAAM;oFAET,wBAAwB;cAHpC,UAAU;eAAC;gBACR,UAAU,EAAE,MAAM;aACrB;;;MCEY,aAAa;IAQxB,YAAoB,cAAwC,EAClD,MAAsB;QADZ,mBAAc,GAAd,cAAc,CAA0B;QAClD,WAAM,GAAN,MAAM,CAAgB;QARhC,aAAQ,GAAG,CAAC,CAAC;QACb,uBAAkB,GAAG,CAAC,CAAC;QACvB,UAAK,GAAG,KAAK,EAAiB,CAAC;QACvB,cAAS,GAAoC,EAAE,CAAC;QAOtD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,CAAC;QAC7F,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACtF,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;KACpE;IAGO,0BAA0B,CAAC,MAAc,EAAE,OAAe,EAAE,IAAY;;QAE9E,MAAM,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,eAAe,CAAC,CAAC;;QAEpF,MAAM,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;QAEvE,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;QAE3C,iBAAiB,CAAC,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;QAE7C,iBAAiB,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;QAEvC,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;QAIzC,MAAM,GAAG,GAAG,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC;YACvD,GAAG,CAAC,WAAW,EAAE,CAAC;YAClB,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;SACjC,CAAC,CAAC;;QAEH,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,YAAY,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACjF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACvC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAI,IAAI,IAAI,MAAM,EAAE;YAClB,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;YACzC,iBAAiB,CAAC,QAAQ,CAAC,gBAAgB,GAAG,IAAI,CAAC;YACnD,iBAAiB,CAAC,QAAQ,CAAC,YAAY,GAAG,KAAK,CAAC;YAChD,iBAAiB,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;;;;;;SAM/C;KACF;IAED,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ;QAC5B,IAAI,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,EAAE;YAC3C,IAAI,CAAC,0BAA0B,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;SAC5D;aACI;YACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;SACvE;KACF;IAED,OAAO,CAAC,iBAAoC;QAC1C,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;QACtD,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC,CAAC;QACxE,IAAI,iBAAiB,CAAC,QAAQ,CAAC,MAAM,EAAE;YACrC,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;SAC3C;QACD,IAAI,IAAI,CAAC,kBAAkB,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;gBAC1B,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACjG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;aACpB;SACF;KACF;IAGD,UAAU;QACR,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAChD,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;KAE7B;;0EArFU,aAAa;kDAAb,aAAa,WAAb,aAAa,mBAFZ,MAAM;oFAEP,aAAa;cAHzB,UAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;MCIY,YAAY;;wEAAZ,YAAY;6CAAZ,YAAY;iDAJd,CAAC,YAAY;SACrB;qFAGU,YAAY,mBALR,eAAe,EAAE,wBAAwB,aAC9C,YAAY,aAEZ,eAAe;oFAEd,YAAY;cANxB,QAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,eAAe,EAAE,wBAAwB,CAAC;gBACzD,OAAO,EAAE,CAAC,YAAY;iBACrB;gBACD,OAAO,EAAE,CAAC,eAAe,CAAC;aAC3B;;;ACZD;;;;ACAA;;;;;;"}